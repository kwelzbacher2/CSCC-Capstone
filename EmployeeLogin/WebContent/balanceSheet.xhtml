<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 * CSCI 2999 Capstone Project
 * Waystone Property Management Intranet
 * @author KWelzbacher 
 -->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h = "http://java.sun.com/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>General Ledger</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
            <link rel="stylesheet" href="/resources/demos/style.css"/>
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        
        <h:outputScript name="js/waystoneEmp.js"/>
    </h:head>
    <h:body>
        <ui:composition template="templates/commonTemplate.xhtml">

            <ui:define name="content">
                
                <h:form id="ledgerForm">
                  <h:panelGrid class="editInfo" columns="5" >
                    <h:outputText value="Select Start Date: "></h:outputText>
                    <h:inputText id="startDa" value ="#{account.startDate}" class="dobDate" size="10" required="true" requiredMessage="Start Date is required" 
                                     validatorMessage="Please enter digits in the form of 1999-01-01 for Start Date">     
                            <f:validateRegex pattern="\d{4}-\d{2}-\d{2}" />
                    </h:inputText> 
                    <h:outputText value="Select End Date: "/>
                    <h:inputText id="endDa" value ="#{account.endDate}" class="dobDate" size="10" required="true" requiredMessage="End Date is required" 
                                     validatorMessage="Please enter digits in the form of 1999-01-01 for End Date">     
                            <f:validateRegex pattern="\d{4}-\d{2}-\d{2}" />
                     </h:inputText>
                     <h:commandButton value="Submit" action="#{account.getSheetBalances(account.startDate, account.endDate)}"/>
                  </h:panelGrid>
                  <h:panelGrid class="warning" columns="1"> 
                    <h:message for="startDa"/>
                    <h:message for="endDa" />
                  </h:panelGrid>
                    <div id="balanceSheet">
                       <h3 class="pageTitle">Balance Sheet</h3>
                       <br/>
                       <h3 class="pageTitle">Assets</h3>
                                              
                        <h:dataTable id="assetTable" value="#{account.assetsList}" var="asset"
                                 styleClass="table" headerClass="table-header" rowClasses="table-odd, table-even"
                                 columnClasses="balName, debit">
                            <h:column> 
                                <f:facet name="header">Name</f:facet>
                                <h:outputText value="#{asset.accountName}"/>
                                <f:facet name="footer">Total Assets:</f:facet>
                            </h:column>
                           
                            <h:column> 
                        
                                <f:facet name="header">Balance</f:facet>                    
                                <h:outputText  value="#{asset.accBalance}"/> 
                                <f:facet name="footer"><h:outputText styleClass="amount" value="#{account.assetBalance}"/></f:facet>                                
                            </h:column>                                                              
                        </h:dataTable>
                         <h3 class="pageTitle">Liabilities</h3>
                                              
                        <h:dataTable id="liaTable" value="#{account.liabsList}" var="lia"
                                 styleClass="table" headerClass="table-header" rowClasses="table-odd, table-even"
                                 columnClasses="balName, debit">
                            <h:column> 
                                <f:facet name="header">Name</f:facet>
                                <h:outputText value="#{lia.accountName}"/>
                                <f:facet name="footer">Total Liabilities:</f:facet>
                            </h:column>
                           
                            <h:column> 
                        
                                <f:facet name="header">Balance</f:facet>                    
                                <h:outputText  value="#{lia.accBalance}"/> 
                                <f:facet name="footer"><h:outputText styleClass="amount" value="#{account.liabsBalance}"/></f:facet>                                
                            </h:column>                                                              
                        </h:dataTable>
                        
                        
                        <h3 class="pageTitle">Equity</h3> 
                        <div id="eTable">
                        <table id="eqTable" class="table">
                            <tr class="table-odd">
                                <th class="table-header">Name</th>
                                <th class="table-header">Balance</th>
                            </tr>
                            <tr class="table-even">
                                <td class="balName">TOTAL COMMON EQUITY</td>
                                <td class="debit"><h:outputText value="#{account.equity}"/></td>
                            </tr>
                            <tr class="table-odd">
                                <td class="balName">Total Equity: </td>
                                <td class="debit"><h:outputText value="#{account.equity}"/></td>
                            </tr>
                        </table>
                        </div>                       
                    </div>
                    <div id="cashFlow">
                        <h3 class="pageTitle">Cash Flow Statement</h3>
                       <br/>
                       <h3 class="pageTitle">Cash Flow Operating Activities</h3>
                                              
                        <h:dataTable id="opTable" value="#{account.operatingList}" var="op"
                                 styleClass="table" headerClass="table-header" rowClasses="table-odd, table-even"
                                 columnClasses="balName, debit">
                            <h:column> 
                                <f:facet name="header">Name</f:facet>
                                <h:outputText value="#{op.accountName}"/>
                                
                            </h:column>
                           
                            <h:column> 
                        
                                <f:facet name="header">Balance</f:facet>                    
                                <h:outputText  value="#{op.accBalance}"/> 
                                                               
                            </h:column>                                                              
                        </h:dataTable>
                        <h3 class="pageTitle">Cash Flow From Investing</h3>
                                              
                        <h:dataTable id="investTable" value="#{account.investList}" var="invest"
                                 styleClass="table" headerClass="table-header" rowClasses="table-odd, table-even"
                                 columnClasses="balName, debit">
                            <h:column> 
                                <f:facet name="header">Name</f:facet>
                                <h:outputText value="#{invest.accountName}"/>
                                
                            </h:column>
                           
                            <h:column> 
                        
                                <f:facet name="header">Balance</f:facet>                    
                                <h:outputText  value="#{invest.accBalance}"/> 
                                                               
                            </h:column>                                                              
                        </h:dataTable>
                        <h3 class="pageTitle">Cash Flow End of Period</h3>
                                              
                        <h:dataTable id="finTable" value="#{account.finList}" var="fin"
                                 styleClass="table" headerClass="table-header" rowClasses="table-odd, table-even"
                                 columnClasses="balName, debit">
                            <h:column> 
                                <f:facet name="header">Name </f:facet>
                                <h:outputText  value="#{fin.accountName}"/>
                            </h:column>
                            <h:column> 
                                <f:facet name="header">Balance</f:facet>       
                                <h:outputText  value="#{fin.accBalance}"/>                          
                            </h:column>                                                              
                        </h:dataTable>
                    </div>
                    <div id="profitLoss">
                        <h3 class="pageTitle">Profit and Loss</h3>
                       <br/>
                       <h3 class="pageTitle">Income</h3>
                                              
                        <h:dataTable id="incTable" value="#{account.incomeList}" var="inc"
                                 styleClass="table" headerClass="table-header" rowClasses="table-odd, table-even"
                                 columnClasses="balName, debit">
                            <h:column> 
                                <f:facet name="header">Name</f:facet>
                                <h:outputText value="#{inc.accountName}"/>
                                <f:facet name="footer">Total Income:</f:facet>
                            </h:column>
                           
                            <h:column> 
                        
                                <f:facet name="header">Balance</f:facet>                    
                                <h:outputText  value="#{inc.accBalance}"/> 
                                <f:facet name="footer"><h:outputText styleClass="amount" value="#{account.incBalance}"/></f:facet>                                
                            </h:column>                                                              
                        </h:dataTable>
                        <h3 class="pageTitle">Expenses</h3>
                                              
                        <h:dataTable id="expTable" value="#{account.expenseList}" var="exp"
                                 styleClass="table" headerClass="table-header" rowClasses="table-odd, table-even"
                                 columnClasses="balName, debit">
                            <h:column> 
                                <f:facet name="header">Name</f:facet>
                                <h:outputText value="#{exp.accountName}"/>
                                <f:facet name="footer">Total Expense:</f:facet>
                            </h:column>
                           
                            <h:column> 
                        
                                <f:facet name="header">Balance</f:facet>                    
                                <h:outputText  value="#{exp.accBalance}"/> 
                                <f:facet name="footer"><h:outputText styleClass="amount" value="#{account.expenseBalance}"/></f:facet>                                
                            </h:column>                                                              
                        </h:dataTable>
                        <h3 class="pageTitle">Profit/Loss</h3>
                                              
                        <h:dataTable id="profTable"
                                 styleClass="table" headerClass="table-header" rowClasses="table-odd, table-even"
                                 columnClasses="balName, debit">
                            <h:column> 
                                <f:facet name="header">Net Income: </f:facet>
                            </h:column>
                            <h:column> 
                                <f:facet name="header"><h:outputText  value="#{account.profitLoss}"/></f:facet>                                 
                            </h:column>                                                              
                        </h:dataTable>
                    </div>  
                     
                </h:form>
            </ui:define>
            
        </ui:composition>
    </h:body>
</html>